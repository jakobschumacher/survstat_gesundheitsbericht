}
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, "-", Datum, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, "-", Datum, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, "-", Datum, ".html")
)
}
render_report("Reinickendorf")
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
Krankheitsvar = "Acinetobacter-Infektion oder –Kolonisation"
floor = "1 year"
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
filter(Meldejahrmitwoche < as.Date("2020-01-01", origin = "1970-01-01"))
View(df)
source("plot.R")
krankheitsliste <- data %>% filter(str_detect(Ort, as.character(params$Ort))) %>% group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>% filter(summe > 20) %>% pull(Krankheit) %>% as.character()
for (i in krankheitsliste) {
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
# print(fallzahlPlot(i))
print(inzidenzPlot(i))
}
data <- readRegion()
krankheitsliste <- data %>% filter(str_detect(Ort, as.character(params$Ort))) %>% group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>% filter(summe > 20) %>% pull(Krankheit) %>% as.character()
for (i in krankheitsliste) {
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
# print(fallzahlPlot(i))
print(inzidenzPlot(i))
}
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
krankheitsliste <- data %>% filter(str_detect(Ort, as.character(params$Ort))) %>% group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>% filter(summe > 20) %>% pull(Krankheit) %>% as.character()
for (i in krankheitsliste) {
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
# print(fallzahlPlot(i))
print(inzidenzPlot(i))
}
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, "-", Datum, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, "-", Datum, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 100, "3 months", "1 year")) %>%
filter(summe > 20)
krankheitsliste
krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 100, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
View(krankheitsliste)
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
floorvalue
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
floor = "3 monthsr"
Krankheitsvar = "Campylobacter-Enteritis"
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
df
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
g <- ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
print(g)
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue")
View(df)
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue")
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free")
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
floor = "3 months"
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
floor = "1 year"
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
floor = "3 months"
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Spandau")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Spandau")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = as.character(params$Ort))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = as.character(params$Ort))
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = "Hamburg")
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
source("R\plot.R")
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("../Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("..\Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
View(params)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- params$Ort
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- as.character(params$Ort)
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- as.character(params$Ort)
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
