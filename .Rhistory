ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
floor = "3 months"
# Filter the data and floor to the floor
df <- data %>% filter(Krankheit == Krankheitsvar) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, floor)) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarize(Anzahl = sum(Anzahl))
earliestDate <- min(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
latestDate <- max(df %>% filter(Anzahl != 0) %>% pull(Meldejahrmitwoche))
df <- df %>% filter(Meldejahrmitwoche > earliestDate & Meldejahrmitwoche < latestDate)
# Plot the graph
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort, Datum = strftime(Sys.Date(), format = "%Y-%m-%d")) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Spandau")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Spandau")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = as.character(params$Ort))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = as.character(params$Ort))
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Essen")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("readSurvstat.R")
source("readRegion.R")
source("plot.R")
data <- readRegion(Region = "Hamburg")
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
source("R\plot.R")
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("../Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("..\Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
library("rmarkdown")
render_report = function(Ort) {
rmarkdown::render("Gesundheitsbericht.Rmd",
params = list(Ort = Ort),
output_file = paste0("Gesundheitsbericht-", Ort, ".html")
)
}
render_report("Reinickendorf")
View(params)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- params$Ort
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- as.character(params$Ort)
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, error = FALSE)
library("knitr")
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
Regionsvalue <- as.character(params$Ort)
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = Regionsvalue)
krankheitsliste <- data %>%
filter(str_detect(Ort, as.character(params$Ort))) %>%
group_by(Krankheit) %>% summarise(summe = sum(Anzahl)) %>%
mutate(floor = ifelse(summe > 200, "3 months", "1 year")) %>%
filter(summe > 20)
for (i in krankheitsliste$Krankheit) {
floorvalue <- krankheitsliste %>% filter(Krankheit == i) %>% pull(floor)
cat("\n")
cat("\n")
cat("##", i, "\n")
cat("\n")
print(fallzahlPlot(i), floor = floorvalue)
print(inzidenzPlot(i), floor = floorvalue)
}
library("ISOweek")
library("lubridate")
library("pdftools")
suppressMessages(library("tidyverse"))
suppressMessages(setwd(here::here()))
source("R/readSurvstat.R")
source("R/readRegion.R")
source("R/plot.R")
data <- readRegion(Region = as.character(params$Ort))
df <- data %>% filter(str_detect(Krankheit, "Campylobacter-Enteritis"))
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus")) %>%
```
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus")) %>%
```
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus"))
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose"))
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = Anzahl, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
theme_classic()
df <- data %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Ort) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
theme_classic()
df <- data %>%
filter(Ort == "Reinickendorf") %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
theme_classic()
df <- data %>%
filter(Ort == "Reinickendorf") %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche) %>%
summarise(summe = sum(Anzahl))
df <- data %>%
filter(Ort == "Reinickendorf") %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
facet_grid(Ort~., scales = "free") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_classic()
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche), fill = Krankheit) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche), fill = Krankheit) +
geom_bar(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = sum(Anzahl))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_line(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, color = Krankheit)) +
geom_(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, color = Krankheit)) +
geom_line(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, color = Krankheit)) +
geom_bar(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity") +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "Campylobacter-Enteritis|Norovirus|Rotavirus|Salmonellose|Yersiniose|Listeriose")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
table(data$Krankheit)
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "MRSA, invasive Infektion|Acinetobacter-Infektion oder –Kolonisation|Clostridioides difficile|nterobacteriaceae-Infektion oder –Kolonisation ")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
# Make the graphs description
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity") +
labs(title = title,
subtitle = subtitle,
caption = paste("Datenquelle:", Quellenangabe)) +
theme_classic()
df <- data %>%
filter(str_detect(Ort, "Reinickendorf")) %>%
filter(str_detect(Krankheit, "MRSA, invasive Infektion|Acinetobacter-Infektion oder –Kolonisation|Clostridioides difficile|nterobacteriaceae-Infektion oder –Kolonisation ")) %>%
mutate(Meldejahrmitwoche = floor_date(Meldejahrmitwoche, "1 year")) %>%
group_by(Meldejahrmitwoche, Krankheit) %>%
summarise(summe = mean(Inzidenz))
Quellenangabe <- data$Quellenangabe[1]
title <- paste("Fälle von", Krankheitsvar)
subtitle <- paste(data$Ort[1],
"\n vom",
strftime(min(data$Meldejahrmitwoche), format = "%d.%m.%Y"),
"bis zum",
strftime(max(data$Meldejahrmitwoche), format = "%d.%m.%Y"))
ggplot(data = df, aes(y = summe, x = Meldejahrmitwoche, fill = Krankheit)) +
geom_bar(stat = "identity")
